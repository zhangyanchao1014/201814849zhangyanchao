dblvisualcom david b lewi subject compwindowsx frequently asked question faq 55 archivename xfaqpart5 lastmodified 19930404 subject 119 im writing widget cant use float resource value float resource portable size value may larger size xtpointer try using pointer float instead xaw scrollbar float resource handled thi way subject 120 thi memory leak x11r4 xtdestroywidget ye thi unofficial fix19 x11r4 destroyc destroyc137 thu jul 11 154125 1991 libxtdestroyc thu jul 11 154223 1991 14 15 xconsortium destroycv 137 900928 102132 swick exp plu unofficial patch revision 140 141 copyright 1987 1988 digital equipment corporation maynard massachusett 221239 int 0 destroyrec dr appdestroylist appdestroycount drdispatchlevel dispatchlevel widget w drwidget appdestroycount bcopy chardr1 chardr appdestroycountsizeofdestroyrec xtphase2destroyw else dr 222245 int 0 destroyrec dr appdestroycount xtphase2destroy result call xtdestroywidget could cause appdestroylist reallocated dr appdestroylist drdispatchlevel dispatchlevel widget w drwidget appdestroycount bcopy chardr1 chardr appdestroycount sizeofdestroyrec xtphase2destroyw else donna converse converseexpolcsmitedu subject 121 callback guaranteed called order registered although book demonstrate current implementation xt happen call callback procedure order registered specification guarantee sequence supplemental authoritative document ie asenteswick volume say order undefined callback list manipulated widget application xt guarantee order execution general callback procedure thought operating independently one another depend sideeffect callback operating seqence needed single callback registered explicitly call function necessary 492 thank converseexpolcsmitedu subject 122 doesnt xtdestroywidget actually destroy widget xtdestroywidget operate two pas order avoid leaving dangling datum structure functioncall mark widget actually destroyed ymy program return eventloop subject 123 query user synchronously using xt possible code look like thi trivial callback ha clear flow control call askuser block answer set one valid value ye answer code drop callback back eventprocessing loop void quitwidget w xtpointer client xtpointer call int answer answer askuserw really quit retye answer answer askuserw really positive retye answer exit0 realistic example might ask whether create file whether overwrite thi accomplished entering second eventprocessing loop waiting user answer question answer returned calling function function askuser look something like thi motif replaced widgetsetspecific code create sort dialogbox displaying question string button ok cancel help equivalent int askuserw string widget w char string int answerretnone notused marker widget dialog could cachecarry arg args3 int n 0 xtappcontext context n0 xtsetargargsn xmnmessagestring xmstringcreateltorstring xmstringdefaultcharset n xtsetargargsn xmndialogstyle xmdialogapplicationmodal n dialog xmcreatequestiondialogxtparentw string arg n xtaddcallbackdialog xmnokcallback response answer xtaddcallbackdialog xmncancelcallback response answer xtaddcallbackdialog xmnhelpcallback response answer xtmanagechilddialog context xtwidgettoapplicationcontext w answer retnone xtapppendingcontext xtappprocessevent context xtimall xtdestroywidgetdialog blow away dialog box shell return answer dialog support three button set call function tickled user variable answer set user finally select one choice void responsew client call widget w xtpointer client xtpointer call int answer int client xmanycallbackstruct reason xmanycallbackstruct call switch reasonreason case xmcrok answer retye define value break case xmcrcancel answer retno break case xmcrhelp answer rethelp break default return code unwrap back point answer wa needed continue thank dan heller argvsuncom code dan r3contrib widgetwrap library 291 subject 124 determine name existing widget widget id need know name widget user r4 later best using xtname function work widget nonwidget object still using r3 use thi simple bit code want note depend widget internal datum structure necessarily portable future version xt including r4 include x11coreph include x11xresourceh string xtname widget widget widget work nonwidget object return xrmnametostringwidgetcorexrmname 790 modified suggestion larry roger larryboriswebodgcom 991 subject 125 get baddrawable error drawing xtwindowwidget im thi order get window xlib graphic within xtbased program canva xtcreatemanagedwidget widgetclas drawing area window xtwindowcanva get window associated widget xdrawline window produce error window associated widget created part realization widget using window id null window could create error describe necessary call xtrealizewidget attempting use window associated widget note window created xtrealizewidget call server may actually mapped yet also wait expose event window drawing subject 126 get badmatch error calling xgetimage badmatch error occur specified rectangle go edge screen dont want catch error deal take following step avoid error 1 make pixmap size rectangle want capture 2 clear pixmap background using xfillrectangle 3 use xcopyarea copy window pixmap 4 get noexpose event copy wa clean use xgetimage grab image pixmap 5 get one graphicsexpose event copy wasnt clean xywidthheight member graphicsexpose event structure tell part pixmap arent good 6 get rid pixmap probably take lot memory 1092 thank oliver jone ojpictelcom subject 127 application tell run x number program offer x mode otherwise run straight characteronly mode easiest way application determine running x display attempt open connection x server display xopendisplaydisplayname display x stuff else curse something else displayname either string specified commandline following display convention otherwise charnull case xopendisplay use value display set thi superior simply checking existence display commandline argument checking display set environment neither adequate 591 subject 128 make busy cursor application computing necessary call xdefinecursor every window application easiest thing create single inputonly window large largest possible screen make child ymy toplevel window clipped window wont affect application need big largest possible screen case user enlarge window busy move elsewhere within virtual desktop substitute toplevel ymy topmost widget similar code work xlibonly application use ymy top window unsigned long valuemask xsetwindowattribute attribute ignore device event busy cursor displayed valuemask cwdontpropagate cwcursor attributesdonotpropagatemask keypressmask keyreleasemask buttonpressmask buttonreleasemask pointermotionmask attributescursor xcreatefontcursorxtdisplaytoplevel xcwatch window big display screen clipped parent window never worry resizing xcreatewindowxtdisplaytoplevel xtwindowtoplevel 0 0 65535 65535 unsigned int 0 0 inputonly copyfromparent valuemask attribute maximum size could replaced real size screen particularly avoid server problem window larger 32767 want use thi busy cursor map raise thi window go back normal unmap thi automatically keep getting extra mouse event depending precisely window manager work may may similar effect keystroke well addition note also xaw widget support xtncursor resource temporarily reset merely wish change cursor without blocking pointer event thank andrew wason awcellarbaebellcorecom dan heller argvsuncom mouselarrymcrcimmcgilledu 1190591 subject 129 fork without hanging parent x program xbased application spawn unix process continue run closed typically vanish child terminated child inherit parent open x connection display need fork immediately child proces close connectionnumberxtdisplaywidget close filedescriptor display information thi ymy exec able exit parent alternatively execing make thi call cause file descriptor closed exec void fcntlconnectionnumberxdisplay fsetfd 1 thank janet anstett anstettjtrampcoloradoedu gordon freedman gjf00dutscccamdahlcom 291 greg holmberg holmbergframecom 393 subject 130 make xt xlib call signal handler xlib xt mutual exclusion protecting critical section ymy signal handler make call wrong time might function calling already executing leave library inconsistent state note ansi c standard point behavior signal handler undefined signal handler call function signal thi problem specific xlib xt posix specification mention function may called safely may assumed function called xlib xt function work around problem setting flag interrupt handler later checking work procedure timer event ha previously added note article x journal 14 example oreilly volume 6 error thank pete ware warecisohiostateedu donna converse converseexpolcsmitedu 592 subject 131 xlib sequence lost error may see error issue xlib request xlib error handler likely make call generate x request xt xlib signal handler shouldnt case subject 132 xt program handle socket pipe file input common need write xt program accept input user vium x connection file descriptor operate efficiently without blocking either x connection file descriptor solution use xtappaddinput open ymy file descriptor use xtappaddinput register input handler input handler called every time something file descriptor requiring ymy program attention write input handler like would xt callback work quickly return important use nonblocking io system call ymy input handler input handler read file descriptor although input handler write handle exception condition wish careful register input handler read disk file find function called even isnt input pending xtappaddinput actually working supposed input handler called whenever file descriptor ready read new datum read disk file unlike pipe socket almost alway ready read however spin back beginning read datum youve read result ymy function almost alway called every time around xtappmainloop way get type interaction expecting add thi line beginning ymy function test whether new datum ioctlfd fionread n 1 n 0 return thi called frequently ymy application effectively busywait may better using xtappaddinput instead setting timer timer procedure checking file input courtesy dan heller argvoracom 890 mouselarrymcrcimmcgilledu 591 ollie jone ojpictelcom 692 subject 133 simulate button pressrelease event widget thi using xsendevent likely youre setting window field event xt need order match widget receive event youre sending event ymy application use xtdispatchevent instead thi efficient xsendevent avoid roundtrip server depending well widget wa written may able call action procedure order get effect want courtesy mark horstman mh2620sareksbccom 1190 subject 134 doesnt anything appear run thi simple program thewindow xcreatesimplewindowthedisplay rootwindowsizehintsxsizehintsy sizehintswidthsizehintsheightborderwidth blackpixelthedisplaythescreen whitepixelthedisplaythescreen xselectinputthedisplaythewindowexposuremaskbuttonpressmask buttonreleasemask xmapwindowthedisplaythewindow xdrawlinethedisplaythewindowthegc55100100 right map window drawing however window ready drawn actually appear screen ymy application receife expose event drawing done generally appear youll see code like thi many program thi code would appear window wa created mapped done xnexteventthedisplaytheevent switch theeventtype case expose expose event redraw xdrawlinethedisplaythewindowthegc55100100 break note second problem xlib implementation dont set default graphic context correct foregroundbackground color thi program could previously include thi code thegcvaluesforegroundblackpixelthedisplaythescreen eg thegcvaluesbackgroundwhitepixelthedisplaythescreen eg thegc xcreategcthedisplaythewindow gcforegroundgcbackgroundthegcvalue note code use blackpixel whitepixel avoid assuming 1 black 0 white viceversa relationship pixel 0 1 color black white implementationdependent may reversed may even correspond black white also note actually using blackpixel whitepixel usually wrong thing finished program ignore user preference foreground background also note run situation xtbased program draw xtwindoww right ha realized may yet appeared subject 135 difference screen screen screen xlib structure include information one monitor virtual monitor single x display support server support several independent screen numbered unix00 unix01 unix02 etc screen screennumber second digit 0 1 2 thought index array available screen thi particular display connection macro use obtain information particular screen ymy application running typically two form one take screen one take display screennumber xtbased program typically use xtscreenwidget determine screen ymy application running use single screen part confusion may arise fact macro return characteristic screen display name xdisplaywidth xdisplayheight etc subject 136 use c x11 motif xview x11r45 header file compatible c motif 11 header file usable inside extern c however definition string intrinsich conflict libg string clas need worked around project help wwl set c class jeandaniel fekete wrap x toolkit widget available vium anonymou ftp exportlcsmitedu contribwwl12tarz 792 lrilrifr 129175151 pubwwl12tarz work building set c class parallel clas tree widget c interview toolkit obtainable vium anonymou ftp interviewsstanfordedu interview use boxglue model similar tex constructing user interface support multiple look user interface sample application include wysiwig document editor doc macdrawlike drawing program idraw interface builder ibuild thing clas library written rome air force base strategic air command available freeware archive site motif publicdomain library define c clas wrapper motif 11 add application clas eg initializing x also integrate wcl xba widget set thi work wa developed ronald van loon rvlooncvruunl based x set binding done university lowell graphic research laboratory current source available decuacdeccom 19252141 pubx11motif21jul92tarz source code example doug young objectoriented programming c osfmotif isbn 0136302521 include widget wrapper include set class encapsulate higherlevel facility commonly needed motif xtbased application check export ftpcontribyoungctarz rogue wave offer viewh c programmer using motif info 18004873217 1 503 754 2311 product called commonview glockenspiel ltd ireland apparently cbased toolkit multiple window system including pm window xmotif xv sold qualix 4155720200 fax 1300 implement interface gil file sun openwindow developer guide 30 produce xview wrapper class c uit set c class embedding xview toolkit intended use sun openwindow developer guide 30 builder tool source exportmiteduau uittarz version 2 wa released 52892 also likely use objectcenter saberc reasonable alternative parcplace formerly solbourne object interface thank dougla rand dsrandmitreorg george wu gwutcscom291 subject 137 obtain alternate language binding x version clx lisp binding part x11 core source distribution version clx r5 tape 1091 version 502 992 exportlcsmitedu contribclxr502tarz saic adax11 binding anonymou ftp pub starsrosslynunisyscom 1281261642 xada study team sponsored nasa jsc apparently working binding information xadaghghoutxu gnu smalltalk ha betum native smalltalk binding x called stix stevenbyrneengsuncom still beginning stage documentation sparse outside smalltalk code source available pubgnusmalltalk111tarz prepaimitedu 1871038 ugleunitno 129241197 prolog binding called xwip written ted kim ucla supported part darpa available anonymou ftp exportlcsmiteducontribxwiptarz ftpcsuclaedupubxwiptarz prolog language binding depend quintustype foreign function interface ymy prolog developer ha gotten work quintu sicstu prolog inquiry go xwipcsuclaedu 390 scheme binding xlib osfmotif xaw part elk distribution version 15a export obsolete version r5 contrib tape xscm bolton accessory aubrey jaffer scm scheme interpreter provide interface xlib motif openlook available vium ftp altdorfaimiteduarchivescmxscm105tarz nexusyorkucapubschemenewxscm105tarz ada binding motif explicitly eventually made available jet propulsion laboratory probably normal electronic mean advance information obtained dsoulelesdsfvaxjplnasagov may respond time permit adamotif complete binding x motif ada language many common system based part upon saicunisy binding also include uil ada translator info system engineering research corporation 1800adaserc wellsercapplecom also mit consortium although involved producing ada binding x maintain partial listing person involved x ada information available donna converse converseexpolcsmitedu subject 138 xgetwindowattribute get window background pixelpixmap set background pixel pixmap window reread client reason thi client create pixmap set background pixmap window free pixmap window keep thi background pixmap destroyed youre sure window ha background pixel pixmap use xcleararea clear region background color use xgetimage read back pixel however thi action alter content window suffer race condition exposure courtesy dave lemke ncd stuart mark sun note apply border pixelpixmap thi misfeature protocol allows server free manipulate pixelpixmap however want requiring server keep original pixel pixmap potentially lot space saved courtesy jim fulton mit x consortium subject 139 create transparent window completely transparent window easy get use inputonly window order create window mostly transparent several choice shape extension first released x11r4 offer easy way make nonrectangular window set shape window fit area window nontransparent however server support extension machinespecific method implementing transparent window particular server use overlay plane supported hardware note x notion transparent color index generally portable solution use large number tiny window thi make operating application unit difficult final answer consider whether really need transparent window would satisfied able overlay ymy application window information draw separate bitplane color appear properly thank der mouse mouselightningmcrcimmcgilledu 392 see also x journal 14 complete answer including code sample thi last option subject 140 doesnt gxxor produce mathematicallycorrect color value using gxxor may expect drawing value black background black example produce white however drawing operation work rgb value colormap index color resulting colormap index actually point undefined visually random unles actually filled many x server black white often 01 10 program taking advantage thi mathematical coincidence break want combining color gxxor allocating number ymy color cell filling ymy chosen precomputed value want use gxxor simply switch two color take shortcut setting background color gc graphic context 0 foreground color value draw red say result blue draw blue result red thi foreground value xor colormap index red blue thank chri flatter cflatterziaaocnraoedu ken whaley whaleyspectrepadeccom 291 subject 141 every color allocate show black make sure youre using 16 bit 8 red green blue field xcolor structure scaled 0 nothing 65535 fullblast forget scale using example 0255 color xalloccolor function perform correctly resulting color usually black thank paul asente asenteadobecom 791 subject 142 cant program get standard colormap imageprocessing program use xgetrgbcolormap get standard colormap doesnt work xgetrgbcolormap used property xargbdefaultmap create standard colormap return one one already exist use xstdcmap order create standard colormap first 191 der mouse mouselarrymcrcimmcgilledu subject 143 pixmap copy screen show garbage initial content pixmap undefined thi mean server allocate memory leave around whatever happen usually garbage probably want clear pixmap first using xfillrectangle function gxcopy foreground pixel whatever color want ymy background 0l using pixmap mask courtesy dave lemke ncd stuart mark sun subject 144 check whether window id valid program ha id window remote display want check whether window exist anything x asynchronou isnt guarantee window would still exist time got id time sent event window otherwise manipulated send event without checking install error handler catch badwindow error would indicate window longer exist thi scheme work except rare occasion original window ha destroyed id reallocated another window courtesy ken lee kleesynopticscom 490 subject 145 two application draw window ye x server assign id window resource actually server assign bit client application know id manipulate resource almost x server resource except gc private color cell shared problem face disseminate window id multiple application simple way handle thi solf problem application running different machine first application create speciallynamed property rootwindow put window id second application retrieve property whose name also know draw whatever want window note thi scheme work iff one instance first application running scheme subject limitation mentioned question using window id remote display note also still need coordinate higherlevel cooperation among ymy application note also two process share window try use server connection one proces child close connection server open connection mostly courtesy phil karlton karltonwpdsgicom 690 subject 146 cant program work tvtwm swm number application including xwd xwininfo xsetroot handle virtual root window tvtwm swm use typically return wrong child root general solution add thi code use ymy application would normally use rootwindowdpyscreen function name getvroot description get root window even virtual root argument display screen return root window client include x11xatomh window getvrootdpy scr display dpy int scr window rootreturn parentreturn child unsigned int numchild window root rootwindowdpy scr atom swmvroot none int swmvroot xinternatomdpy swmvroot false xquerytreedpy root rootreturn parentreturn child numchild 0 numchild atom actualtype int actualformat long nitem bytesafter window newroot null xgetwindowpropertydpy childreni swmvroot 0 1 false xawindow actualtype actualformat nitem bytesafter unsigned char newroot succes newroot root newroot break return root courtesy david elliott dcesmscsonycom similar code ssetroot version xsetroot distributed tvtwm 291 header file andrea stolcke icsi exportlcsmiteducontribvrooth function similarly providing macro rootwindow defaultrootwindow code include thi header file first run properly presence virtual desktop subject 147 keep window resized user resizing window done window manager window manager pay attention size hint ymy application place window guarantee window manager listen try setting minimum maximum size hint ymy target size hope best 191 subject 148 keep window foreground time rather antisocial application constantly raise eg tracking visibilitynotify event isnt overlapped imagine conflict two program running sure way ymy window appear top stack make window overrideredirect thi mean temporarily assuming windowmanagement duty window want thi infrequently short period time eg popup menu short parametersetting window thank der mouse mouselarrymcrcimmcgilledu 792 subject 149 make text bitmap blink x easy way unles youre willing depend sort extension yet nonexistent arrange blinking either redrawing content periodically possible playing game colormap changing color content thank mouselarrymcrcimmcgilledu der mouse 791 subject 150 get doubleclick xlib user xt support translation manager help get notification doubleclicking good way get doubleclick xlib protocol provide enough support doubleclick clientside timeout unles singleclick action defer actually taking next see event server thu timeout mean systemdependent code unixish implementation use xconnectionnumber get file descriptor x connection use select something similar note many userinterface reference suggest doubleclick used extend action indicated singleclick thi case ymy interface execute first action compromise check timestamp second event determine whether singleclick action doubleclick action thank mouselarrymcrcimmcgilledu der mouse 493 subject 151 render rotated text xlib intentionally provide sophisticated graphic capability leaving serverextension clientsside graphic library ymy choice want stay within core x protocol render text pixmap read back vium xgetimage rotate hand whatever matrix want put back server vium xputimage specifically 1 create bitmap b write ymy text 2 create xybitmap image b vium xgetimage 3 create xybitmap image i2 big enough handle transformation 4 xy i2 i2xy iab x costhetum sinthetum b x sinthetum costhetum 5 render i2 note careful implement thi lose bit algorithm based shear transformation may fact better highlevel serverextension graphic package available x also permit rendering rotated text display postscript pex phig gk although capable arbitrary rotation probably use font would found printer addition enough acces server install font create font consist letter rotated predefined angle ymy application figure placement glyph courtesy der mouse mouselarrymcrcimmcgilledu eric taylor etaylorwilkinsbmctmcedu ken lee kleesynopticscom 1190 liam quin leesqcom 1290 interview c ui toolkit x contrib software ha support rendering rotated font x could one source example code brian r smith brsmithcsumnedu 391 another possibility use hershey font strokerendered used x converting xdrawline request ericpencomcom 1091 xrotfont program alan richardson mppa3symasussexacuk posted compsourcesx july 14 1992 paint rotated font implementing method using outline hershey font xvertext package alan richardson mppa3symasussexacuk set function facilitate writing text angle version 30 wa recently released altsource compsourcesmisc 393 also export contribxvertext30sharz oreilly x resource volume 3 include information hp modification x font server provide rotated scaled text subject 152 x registry reserve name place x toolkit application x protocol define use string name context conflict possible different component use name different thing mit x consortium maintain registry name domain orgainization name selection name selection target resource type application class clas extension record type several list 791 directory mitdocregistry r5 tape also available sending send doc registry xstuff mail server register name first come first served ask question send xregistryexpolcsmitedu sure include postal addres confirmation 1190 condensed asenteswick appendix h david b lewi faqcraftuunetuunet faq maam joe friday david b lewi temporarily speaking visual inc day dblvisualcom evening davidcraftuunetuunet