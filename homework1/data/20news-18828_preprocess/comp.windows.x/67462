sinclairdcsglasgowacuk duncan sinclair subject glasgow rx remote execution x program part0101 posted thi week back got back wa error message pnews devnull permission denied yep devnull mode 600 arrghhh renewed interest setting display variable etc thought would post contribution thi perl script solution try intelligent able type rx hostdomainetc get xterm running hostdomainetc difficult stuff taken care theory thi program everything ever wanted wanted run remote command background doesnt even need x program try rx bigmachine make instance backgrounded make remote bigmachine detail full list feature read readme file 20 line comment welcome duncan binsh thi shell archive remove anything thi line unpack saving file typing sh file overwrite existing file type sh file c also feed thi standard input vium unshar typing sh file eg thi archive complete see following message end end archive 1 1 content readme imakefile manifest makefile rxman rxpl wrapped sinclairdcsglaacuk thu apr 8 184748 1993 pathbinusrbinusrucb export path test f readme 1 c echo shar clobber existing file readme else echo shar extracting readme 1442 character sed sx readme endoffile x x glasgow rx remote execution x program version 317 x xcopyright 1992 duncan sinclair sinclairdcsglaacuk x xtrivial install imakefile make even trivial x xthe perl script need customisation installed xedit rxpl file read comment youve done xthi xmkmf make install installman x xfeature x x right thing offsite remote execution including x setting display include domain name passing x magic cookie xhost stuff x x allow different remote user name rx l user host x x smart quoting argument make passing wildcard easy x x custom command execution link remac get remote x emac command x x automatic xterm option name xterm according hostname x turn login shell x x default command xterm x x propagate xish env variable remote session user may x extend list variable pa x x special handling bourne shell user x x try remote execution directory local x propagate pwd intelligent manner x x log error file x x overall intelligence tm make reasoned decision x trying try right thing x x written perl portability hackability x xfor info read man page source x endoffile test 1442 ne wc c readme echo shar readme unpacked wrong size fi end readme fi test f imakefile 1 c echo shar clobber existing file imakefile else echo shar extracting imakefile 370 character sed sx imakefile endoffile x glasgow rx imakefile x x program rx x xall program x xinstall safe x xinstallnamedprogrxplrxbindir xinstallmanpagerxmandir x xinstall x rm bindirrxterm x ln bindirrx bindirrxterm x xsafe x grep debug 0 rxpl false x xshar safe x makekit p x perl pu e ssinclairdcsglaacuksinclairdcsglaacuk part x endoffile test 370 ne wc c imakefile echo shar imakefile unpacked wrong size fi end imakefile fi test f manifest 1 c echo shar clobber existing file manifest else echo shar extracting manifest 313 character sed sx manifest endoffile x file name archive description x x readme 1 read first x imakefile 1 x manifest 1 thi shipping list x makefile 1 x rxman 1 x rxpl 1 endoffile test 313 ne wc c manifest echo shar manifest unpacked wrong size fi end manifest fi test f makefile 1 c echo shar clobber existing file makefile else echo shar extracting makefile 10172 character sed sx makefile endoffile x makefile generated imake edit x xconsortium imakecv 165 910725 175017 rw exp x x cpp used thi machine replace newline multiple tab x space macro expansion single space imake try compensate x thi alway successful x x x x makefile generated imaketmpl tmpiifa04196 x xconsortium imaketmplv 1139 910916 085248 rw exp x x platformspecific parameter may set appropriate vendorcf x configuration file sitespecific parameter set file x sitedef full rebuild recommended parameter changed x x ymy c preprocessor define unique symbol need x set bootstrapcflag rebuilding imake usually x make world first time x x x x sitespecific configuration parameter need come x platformspecific parameter edit sitedef change x x site xconsortium sitedefv 12 910730 202644 rw exp x x x platformspecific configuration parameter edit suncf change x x platform xconsortium suncfv 17211 920318 131337 rw exp x x operating system suno 413 x x xconsortium sunlibrulesv 17 911220 111947 rw exp x x x sitespecific configuration parameter go x platformspecific parameter edit sitedef change x x site xconsortium sitedefv 12 910730 202644 rw exp x x shell binsh x x top x currentdir x x ar ar cq x bootstrapcflag x cc gcc fpccstructreturn x x x compres compres x cpp libcpp stdcppdefine x preprocesscmd gcc fpccstructreturn e stdcppdefine x install install x ld ld x lint lint x lintlibflag c x lintopt axz x ln ln x make make x mv mv x cp cp x x ranlib ranlib x ranlibinstflag x x rm rm f x troff psroff x msmacro x tbl tbl x eqn eqn x stdinclude x stdcppdefine x stddefine x extraloadflag x extralibrary x tag ctag x x sharedcodedef dsharedcode x shlibdef dsunshlib x x protodefine x x instpgmflag x x instbinflag 0755 x instuidflag 4755 x instlibflag 0644 x instincflag 0444 x instmanflag 0444 x instdatflag 0444 x instkmemflag g kmem 2755 x x projectroot usrx11 x x topinclude iincroot x x cdebugflag o2 x ccoption x x allinclude include extrainclude topinclude stdinclude x alldefine allinclude stddefine extradefine protodefine define x cflag cdebugflag ccoption alldefine x lintflag lintopt dlint alldefine x x ldlib syslibrary extralibrary x x ldoption cdebugflag ccoption localldflag lusrlibdir x x ldcombineflag x r x dependflag x x macrofile suncf x rmcmd rm ckp ln bak bak core err emac tag tag makelog makeout x x imakedefine x x irulesrc configdir x imakecmd imake duseinstalled iirulesrc imakedefine x x iconfigfile irulesrcimaketmpl irulesrcimakerule x irulesrcprojecttmpl irulesrcsitedef x irulesrcmacrofile extraiconfigfile x x x x window system build parameter x xconsortium projecttmplv 113811 921111 094919 rw exp x x x x window system make variable thi need coordinated rule x x pathsep x usrlibdir usrx11lib x bindir usrx11localbin x incroot usrx11include x buildincroot top x buildincdir buildincrootx11 x buildinctop x incdir incrootx11 x admdir usradm x libdir usrlibdirx11 x configdir libdirconfig x lintlibdir usrlibdirlint x x fontdir libdirfont x xinitdir libdirxinit x xdmdir libdirxdm x twmdir libdirtwm x manpath usrx11man x mansourcepath manpathman x mansuffix n x libmansuffix 3 x mandir mansourcepathmansuffix x libmandir mansourcepathlibmansuffix x nlsdir libdirnl x pexapidir libdirpex x xapploaddir libdirappdefault x fontcflag x x instappflag instdatflag x x imake imake x depend makedepend x rgb rgb x x fontc bdftopcf x x mkfontdir mkfontdir x mkdirhier binsh bindirmkdirhier x x configsrc topconfig x docutilsrc topdocutil x clientsrc topclient x demosrc topdemo x libsrc toplib x fontsrc topfont x includesrc topx11 x serversrc topserver x utilsrc toputil x scriptsrc utilsrcscript x examplesrc topexample x contribsrc topcontrib x docsrc topdoc x rgbsrc toprgb x dependsrc utilsrcmakedepend x imakesrc configsrc x xauthsrc libsrcxau x xlibsrc libsrcx x xmusrc libsrcxmu x toolkitsrc libsrcxt x awidgetsrc libsrcxaw x oldxlibsrc libsrcoldx x xdmcplibsrc libsrcxdmcp x bdftosnfsrc fontsrcbdftosnf x bdftosnfsrc fontsrcclientsbdftosnf x bdftopcfsrc fontsrcclientsbdftopcf x mkfontdirsrc fontsrcclientsmkfontdir x fslibsrc fontsrclibf x fontserversrc fontsrcserver x extensionsrc topextension x xilibsrc extensionsrclibxinput x pexlibsrc extensionsrclibpexlib x phigslibsrc extensionsrclibpex x x xconsortium sunlibtmplv 11412 921111 095502 rw exp x xshlibldflag assert puretext xpicflag fpic x x depextensionlib x extensionlib lxext x x depxlib depextensionlib x xlib extensionlib lx11 x x depxmulib usrlibdirlibxmusasoxmurev x xmulibonly lxmu x xmulib lxmu x x depoldxlib x oldxlib loldx x x depxtoollib usrlibdirlibxtsasoxtrev x xtoollib lxt x x depxawlib usrlibdirlibxawsasoxawrev x xawlib lxaw x x depxilib x xilib lxi x x deppexlib x pexlib lpex5 x x soxlibrev 410 x soxtrev 410 x soxawrev 50 x sooldxrev 410 x soxmurev 410 x soxextrev 410 x soxinputrev 410 x sopexrev 10 x x depxauthlib usrlibdirlibxaua x xauthlib lxau x depxdmcplib usrlibdirlibxdmcpa x xdmcplib lxdmcp x x depphigslib usrlibdirlibphigsa x phigslib lphig x x depxbsdlib usrlibdirlibxbsda x xbsdlib lxbsd x x lintextensionlib lintlibdirlliblxextln x lintxlib lintlibdirlliblx11ln x lintxmu lintlibdirlliblxmuln x lintxtool lintlibdirlliblxtln x lintxaw lintlibdirlliblxawln x lintxi lintlibdirlliblxiln x lintpex lintlibdirlliblpex5ln x lintphig lintlibdirlliblphigsln x x deplib depxawlib depxmulib depxtoollib depxlib x x deplibs1 deplib x deplibs2 deplib x deplibs3 deplib x x x imake rule building library program script datum file x rule xconsortium imakerulesv 1123 910916 201216 rw exp x x x start imakefile x x glasgow rx imakefile x x program rx x xall program x xinstall safe x xinstall rxpl x destdirbindir set x x else set x mkdirhier destdirbindir fi x install c instbinflag rxpl destdirbindirrx x xinstallman rxman x destdirmandir set x x else set x mkdirhier destdirmandir fi x install c instmanflag rxman destdirmandirrxmansuffix x xinstall x rm bindirrxterm x ln bindirrx bindirrxterm x xsafe x grep debug 0 rxpl false x xshar safe x makekit p x perl pu e ssinclairdcsglaacuksinclairdcsglaacuk part x x x common rule makefile edit x xemptyrule x xclean x rmcmd x xmakefile x f makefile set x x rm makefilebak mv makefile makefilebak x else exit 0 fi x imakecmd dtopdirtop dcurdircurrentdir x xtag x tag w ch x tag xw ch tag x xsaber x load alldefine src x xosaber x load alldefine obj x x x empty rule directory subdir edit x xinstall x echo install currentdir done x xinstallman x echo installman currentdir done x xmakefile x xinclude x x x dependency generated makedepend x endoffile test 10172 ne wc c makefile echo shar makefile unpacked wrong size fi end makefile fi test f rxman 1 c echo shar clobber existing file rxman else echo shar extracting rxman 3551 character sed sx rxman endoffile xth rx 1 4 march 1993 x version 11 xsh name xrxrxtermr remote command xterm anything execution xsh synopsi xb rx x xb l xi username x xi host x xi command x xbr xb rxterm x xb l xi username x xi host x xir arg x xsh description xthe xb rx xprogram connect specified xi host xand execute specified xi command xin background returning immediately allow execution xof x program copy number environmental variable xthe remote session omit xir command xthen rx start xterm remote host xb rxterm xvarient start remote xterm host also pas xi arg xto remote xterm argument xpp xshell metacharacter quoted interpreted local xmachine quoted metacharacter interpreted remote xmachine xpp xif name file xb rx xi executed anything rx xb rx xtake thi name stripped leading r command xto run remote host using xi command xparameter argument remote command xpp xif xb rx xthink using xb xauth xbased x authorisation calling offsite host xto different username attempt copy authorization xkey remote account otherwise try use xb xhost1 xto grant acces remote host xsh option xtp xbi l username xuse xi username xa remote username instead ymy local username absence xof thi option remote username ymy local username x xsh environment xif set value path display xenvironment xapplresdir xxfilesearchpath xuserfilesearchpath openwinhome ldlibrarypath xand xauthority exported remote program unles xremote username different remote host offsite xcase display exported case variable named xvariable rxenv xpp xthe display variable tweaked appropriate contain qualified xa hostname needed xsh diagnostic xtp xib command dont recognise name xb rx xcannot decode name ha called thi case xit print warning message continue normal xtp xb rx usage rx l username hostname arg xthi mean could decode argument given xsh author xduncan sinclair sinclairdcsglasgowacuk july 1992 xbr xoriginally based program name xb gwm xdistribution distinguish thi rx program xwith similar name refer thi program xb glasgow xbr rx xsh see also xx1 rsh1 xterm1 xauth1 xhost1 gwm1 xsh bug xb rx xmake number assumption relationship xlocal user remote one depending whether remote xhost onsite whether alternative username wa used xor xpp xin particular either locally used shell remotely xused shell standard bourne shell xb sh1 xthen strange thing likely happen especially xit one xpp xsometime quoting get messed xpp xit easy fool smart xb rx xto make believe something true fail xpp xwhen xb rx xuse xb xhost xto grant acces xb xhost xcommand may fail silently xpp xif xb rx xtry send large command remote machine xlikely fail parse error csh thi happen xwill probably reduce size exported environment endoffile test 3551 ne wc c rxman echo shar rxman unpacked wrong size fi end rxman fi test f rxpl 1 c echo shar clobber existing file rxpl else echo shar extracting rxpl 9028 character sed sx rxpl endoffile x usrlocalbinperl x config change line point ymy copy perl x x glasgow rx version 317 x x copyright 1992 duncan sinclair sinclairdcsglaacuk x x last modified early april 1993 x x distribution limited per usual mit copyright x x remote execution x program based script old version gwm x x install put rx ymy bin make rxterm link x configuration necessary see config comment x x thi le le like original x x major hacked work ourmy set also partly x rewritten work sh rather ksh x x maybe ill turn thi first zsh script x x look like turned perl script point big improvement x x thi code try intelligent way work thi mean x ton implicit assumption environment run x assumption valid machine use x environment time try make assumption possible x remote machine list tricky one x remote machine ha csh linux x rshell binksh remote shell binksh make x remote shell sh path compatible use csh etc x pa cookie remote machine need x know cookie eat x must x x using csh run remote command simply doesnt x interact badly rsh hang waiting file descriptor x closed id rather use zsh bash even perl x universal csh x x xrequire statpl x x called x xargv0 0 xargv0 x x config x change variable ymy domain name pattern x match variation ymy domain name must include x leading dot ymy hostname include ymy domain see x code marked xxx x xdom dcsglaacuk xdompat dcsglasgowacuk x x config x change thi ymy value bindir set variable x think ymy user smarter x xxpath usrx11bin x x config x make thi name ymy remote shell command x xrsh rsh x x end config x x variable well doubt use sometime x xusage argv0 usage argv0 l username hostname argsn xrshell getpwuid8 binsh xhome envhome getpwuid7 xxauth envxauthority home xauthority xlogf rxlog xstuff xdebug 0 x x anything else close stdin thi might stop rx hanging x due rsh weirdnes x xclosestdin x x l flag x xif argv0 eq l x shift x user argv0 die usage x luser luser x shift x x x pick host host x xmach argv0 die usage xshift x x thing think remote machine x xmach sdompat xoffsite mach x x seem cant trust dumb user set hostname right x xhostnameenvhostname hostname current host xhostnamehostname current host xhostname sn x x ymy hostname include ymy domain comment next line x xif offsite hostname hostname dom xxx x x know different x xdiff hostname ne mach x x display going x danger heavy regular expression follow x thi need rewritten modular extended x support resetting host unix required x xdisplay envdisplay 00 xdisplay sdompat xdisplay sunixddhostname2 diff xdisplay sdd1dom2 offsite xenvdisplay display x x come hard bit sh quote arg x also quote quote cope csh braindamage x quote quoted thu x arg foobar get foobar x xforeach argv x sg x s1 x x x x xprog x argv0 eq rx last prog x argv0 eq rxterm x unshiftargvl diff x unshiftargvxtermlsnmach x last prog x x argv0 r unshiftargv1 last prog x warn argv0 dont recognise name x x x nothing else become rxterm x xif argv 0 x unshiftargvl diff x unshiftargvxtermlsnmach x x x special consideration ourself side x xif offsite user x x want pa cookie x x e xauth x x thi going unsecure cookie appear number x command line arg least itll work x thi need enhanced ever fix code x set display 00 return server x x cookie pathpathxpath xauth list display x chopcookie x cook split cookie x shiftcook x unshiftstuffxauthadddisplaycook cook 2 x else x x yuk crock hate thi x x systemxhost mach devnull 2devnull diff x x x really want pa value display x x varsdisplay split envrxenv x else x x variable wish export x x var x display x xenvironment x xfilesearchpath x xuserfilesearchpath x xapplresdir x openwinhome x ldlibrarypath x manpath rxman bourne shell user x xauthority x split envrxenv x x x braindead bourne shell need given path x would rather pa current path might work x destination machine id rather wa set user x remote shell rsh x fortunately x program arch independant place x shouldnt co problem locally x check rshell might running another shell x differant login shell know sound weird x common round x ive also included ksh braindamage co cant see easy way x pa throught envenv without late x one person ha ksh login shell anyway x oh yeah assuming bourne shell x bourne shell much important thi isnt x bourne shell better bourne shell x x rshell mksh pushvarspath x x x validate pwd routine x xsub validatepwd x localpwdstat dotstat x localpwd 0 x x unles definedpwd return undef x unles dotstat stat return undef x unles pwdstat statpwd return undef x pwdstatsstdev dotstatsstdev x pwdstatsstino dotstatsstino return undef x pwd x x x try find nice valid pwd x xpresent x pwd envpwd x foopwd pwd x foopwd stmpmntexport2 x pwd validatepwdfoopwd validatepwdpwd x x unles pwd x choppwd pwd x foopwd pwd x foopwd stmpmntexport2 x pwd validatepwdfoopwd validatepwdpwd home x x xpwd s1 x x try find somewhere nice live side x xunles offsite x unshiftstufftestdpwdcdpwd x x x start building full command x xforeach var var x val envvar x unshiftstuffsetenvvarval x x x command side x xunshiftstuffsetnonomatch using csh x x build remote command x xremoteumask 077 join stuffargvdevnull logf xremote sg xremote remote x x build arg list exec x xcommrshlusermachcshfcremote x x x xif debug x print commn x else x exec comm x x x rsh doesnt return indication went x side ok co aint going x wait around see happened x xexit 0 x x end endoffile test 9028 ne wc c rxpl echo shar rxpl unpacked wrong size fi chmod x rxpl end rxpl fi echo shar end archive 1 1 cp devnull ark1isdone missing 1 test f arkiisdone missingmissing fi done test missing echo archive rm f ark19isdone else echo still need unpack following archive echo missing fi end shell archive exit 0 duncan sinclair sinclairdcsglaacuk sinclairukacgladc would real unix operating system please stand