warecisohiostateedu peter ware subject compwindowsxintrinsic frequently asked question faq archivename xtfaq version id faqxtv 128 930402 124112 ware exp x toolkit intrinsic faq monthly posting thi article contain answer frequently asked question faq compwindowsx x toolkit intrinsic submit question preferably answer send email warecisohiostateedu many faq including thi one available archive site rtfmmitedu directory pubusenetnewsanswer name faq archived appear archivename line top article thi faq archived xtfaq code fragment public domain content 0 xt glossary 1 software version 2 related faq 3 application core dump use signalsalarmscthread 4 use different visual default 5 visual application use 6 shell widget visual 7 visual depth colormap shell inherit 8 ive done still get badmatch error 9 doesnt widget get destroyed call xtdestroywidget 10 exit still execute destroycallback 11 resize shell widget 12 cant xtappaddinput handle file 13 good book magazine xt 14 widget available 15 alternative intrinsic 16 pa float value xtsetvalue 17 write resource converter 18 open multiple display 19 changed r3 r4 r5 20 resource loaded 21 order callback executed 22 know widget visible 23 reparent widget xt ie xtreparentwidget 24 use xtmalloc xtfree etc 25 debug xt application 26 dont xtaddinput xtaddtimeout xtaddworkproc work 27 implement drag drop 0 xt glossary xt intrinsic implement object oriented interface c code allow useful graphical component created included thi class provide base functionality object rectobj core composite constraint shell overrideshell wmshell etc term xt intrinsic used interchangeably however used precisely mean specific library x window system particular include athena motif olit widget set without widget intrinsic especially useful widget refer user interface abstraction created vium xt precise use object subclas core clas used loosely refer anything subclas object clas although accurately called windowles widget gadget xlib c interface x11 protocol one layer xt intrinsic typically widget use relatively xlib function xt provide service although understanding xlib help problem 1 software version following latest version xt based software software version released next expected x11r4 patch 18 none x11r5 patch 21 121892 athena widget see x11r5 motif 121 992 olit xtra 25 61592 xw x11r4 none xcu x11r5 none fwf 34 11192 493 2 related faq david b lewi uunetcraftfaq maintain faq x posted monthly compwindowsx located export contribfaq liam r e quin leesqsqcom post faq list open look compwindowsx jan newmarch janpandoniacanberraeduau post faq list motif compwindowsxmotif peter ware warecisohiostateedu post faq list compwindowsxintrinsic export contribfaqxt 3 application core dump use signalsalarmscthread brief xlib xt widget set mutual exclusion critical section interrupt handler likely leave one library inconsistent state appropriate flag yet set dangling pointer middle list traversal etc note ansi c standard point behavior signal handler undefined signal handler call function signal thi problem specific xlib xt posix specification mention function may called safely may assumed function called xlib xt function safe way deal signal set flag interrupt handler thi flag later need checked either work procedure timeout callback incorrect add either interrupt handler another note dangerou add work procedure never finish thi effectively preempt work procedure previously added never called another option open pipe tell event loop read end using xtappaddinput signal handler write byte write end pipe signal however thi could deadlock ymy proces pipe fill dont intrinsic deal thi problem primarily supposed portable layer hardware operating system good enough reason dont think note article x journal 14 example oreilly volume 6 error 4 use different visual default thi require complicated answer window ha three thing visual specific visual colormap border pixmap widget colormap borderpixmap resource shell widget visual resource another question deal shell visual default value resource copyfromparent exactly say shell widget copyfromparent get evalulated defaultvisualofscreen defaultcolormapofscreen one three resource properly set badmatch error occur window created properly set value depend visual used get thi work two part answer first want application start particular visual second want particular shell within application start different visual second actually easier basic information need available first little harder youll need initialize much toolkit order determine needed information sample code start application using something default visual compile cc g visualc visual lxaw lxmu lxt lxext lx11 lm run visual geometry 300x300 depth 24 visual staticcolor fg blue bg yellow need move mouse get particular visual colormap install include x11intrinsich include x11stringdefsh include x11shellh typedef struct visual visual int depth optionsrec optionsrec option xtresource resource visual visual xtrvisual sizeof visual xtoffsetof optionsrec visual xtrimmediate null depth depth xtrint sizeof int xtoffsetof optionsrec depth xtrimmediate null xrmoptiondescrec desc visual visual xrmoptionseparg null depth depth xrmoptionseparg null int main argc argv int argc char argv xtappcontext app application context widget top toplevel widget display dpy display char xargv saved argument vector int xargc saved argument count colormap colormap created colormap xvisualinfo vinfo template find visual xvisualinfo vinfolist returned list visual int count number match 1 arg args10 cardinal cnt char name test char clas test save command line argument xargc argc xargv char xtmalloc argc sizeof char bcopy char argv char xargv argc sizeof char following create dummy toplevel widget retrieve appropriate visual resource cnt 0 top xtappinitialize app clas desc xtnumber desc argc argv string null arg cnt dpy xtdisplay top cnt 0 xtgetapplicationresource top option resource xtnumber resource arg cnt cnt 0 optionsvisual optionsvisual defaultvisualofscreen xtscreen top xtsetarg argscnt xtnvisual optionsvisual cnt create appropriate colormap could use default colormap based clas visual could examine property rootwindow find right colormap could sort thing colormap xcreatecolormap dpy rootwindowofscreen xtscreen top optionsvisual allocnone xtsetarg argscnt xtncolormap colormap cnt find information visual vinfovisualid xvisualidfromvisual optionsvisual vinfolist xgetvisualinfo dpy visualidmask vinfo count vinfolist count 0 xtsetarg argscnt xtndepth vinfolist0depth cnt xfree xpointer vinfolist xtdestroywidget top create real toplevel widget xtsetarg argscnt xtnargv xargv cnt xtsetarg argscnt xtnargc xargc cnt top xtappcreateshell char null clas applicationshellwidgetclas dpy arg cnt display application loop handling event xtrealizewidget top xtappmainloop app return 0 5 visual application use thi point argued one opinion way application know appropriate visual ha specified user disagree thi ymy application probably fall category alway using default visual hardware specific expect particular visual 24bit truecolor overlayplane extension application run isolation depending way server allocate resource may alway want ymy application run truecolor mode going application may upset choose run greyscale instead psuedocolor monochrome example low end color sun server many different possible visual monochrome 256 entry colormap static gray static color 332 truecolor sgi iris offer plu 12 bit truecolor 24 bit truecolor overlay plane 6 shell widget visual thi strictly convention make possible arbitrary widget know visual use found looking shell widget ancestor obtaining visual shell widget visual resource must realize method use visual call xcreatewindow also make thi resource obtained xtgetvalue widget find reasonable value probably xtnvisual 7 visual depth colormap shell inherit default value resource set copyfromparent thi interpreted defaultcolormapofscreen defaultdepthofscreen default visual screen widget ha parent ie applicationshellwidgetclas root ymy widget tree parent widget null shell copy colormap depth parent use copyfromparent visual 8 ive done still get badmatch error resource converter improperly cache reference thi wa especially true x11r3 earlier version motif 9 doesnt widget get destroyed call xtdestroywidget see section 28 xt specification eventually get destroyed immediately intrinsic destroy widget twophase proces first child flag set indicate destroyed put list widget destroyed thi way pending x event reference widget cleaned memory actually freed second phase performed callback event handler action completed checking next x event thi point list traversed widget memory actually freed among thing caveatstrivium widget may destroyed intrinsic determine reference widget list phase 2 destruction occur immediately also nested event loop used widget placed destroy list entering inner event loop destroyed returning outer event loop 10 exit still execute destroycallback problem simple entirely reasonable approach exiting application used calling exit directly widget may chance clean external state open socket temporary file allocated x resource etc thi code simplicity reason assume single toplevel widget widget toplevelget gw widget gw widget find toplevel widget top top gw xtparent top top xtparent top empty return top void exitcallback gw closure calldatum widget gw widget xtpointer closure datum app specified xtpointer calldatum widget specific datum widget toplevel toplevel toplevelget gw xtunmapwidget toplevel make disappear quickly xtdestroywidget toplevel exit 0 one see code exit immediately destroying toplevel widget trouble phase 2 destruction may never occur thi work widget application work widget external state might think since work alway work remember part reason object oriented approach used one ignorant implementation detail widget mean widget may change someday require external state cleaned destroy callback one alternative modify exitcallback set global flag test flag private event loop however private event loop frowned upon tend encourage sloppy difficult maintain practice try following code instead include x11intrinsich extern widget toplevelget needfunctionprototype widget gw endif extern boolean exitworkproc needfunctionprototype xtpointer closure endif extern void exitcallback needfunctionprototype widget gw xtpointer closure xtpointer calldatum endif widget toplevelget gw widget gw widget find toplevel widget top top gw xtparent top top xtparent top empty return top void exitcallback gw closure calldatum widget gw widget xtpointer closure datum app specified xtpointer calldatum widget specific datum widget toplevel toplevel toplevelget gw xtunmapwidget toplevel make disappear quickly xtdestroywidget toplevel xtappaddworkproc xtwidgettoapplicationcontext gw exitworkproc xtpointer null boolean exitworkproc closure xtpointer closure exit 0 notreached exitcallback add work procedure get called application next idle happen event processed destroy callback executed 11 resize shell widget realized one doesnt resize shell widget proper thing resize currently managed child shell widget using xtsetvalue geometry change propagated shell ask window manager may may allow request however shell must resource xtnallowshellresize set true otherwise even ask window manager grant request shell resize change position shell use xtsetvalue shell child within limit window manager granted 12 cant xtappaddinput handle file however unix semantic io ready file fit people intuitive model unix term file descriptor ready reading whenever read call would block ignoring setting optional flag indicate block thi work expected terminal socket pipe file read alway return return indicate eof ie datum result code intrinsic alway call input handler alway think something read culprit select system call sysv based poll system call get around thi unix system best approach use another proces check available input file use pipe connect application thi proces pa file descriptor pipe xtappaddinput suitable program bsd system tail f filename rumored select system completely reliable particular ibm aix 31 thi one would work several thousand time stop event woke thi seemed result race condition kernel ibm claim fix thi pyramid doesnt work ultrix possibly pipe implemented socket wasnt completely broken although writing side wrote 512 byte block reading side received broken wa put pipe byte time waste lot time reading small block get raound detecting situation select ignore pipe 10 msecond given whole block note description used unix terminology read file descriptor pipe etc thi dependent area may identical system however intrinsic designer felt wa common enough operation included part toolkit didnt also deal signal thi point dont know 13 good book magazine xt favorite definitive reference perspective offer reasonable introduction also go full detail intrinsic started using wa already familiar xt concept behind newcomer may may find useful ive alway found accurate complete mean 1000 page asente paul j swick ralph r x window system toolkit complete programmer guide specification digital pres 1990 isbn 1555580513 order number eye757edp prenticehall isbn 0139721916 also available dec direct 1800digital book commonly recomend novice young doug x window system application programming xt motif version prentice hall 1989 isbn 0134970748 isbn 0139721673 course oreilly ha entire series manual x xt oreilly ordering 8009989938 particular volume 5 xt reference done manual page style 3rd edition extensively overhauled go far beyond mit manual page im finding useful particular permutted index reference manual page help great deal chasing related information read two periodical x resource x journal two dealing specifically x x resource published quarterly oreilly one issue mit x consortium technical conference proceeding advertising ive found informative pretty good depth order call 18009989938 email cathyroracom editorial matter email adrianoracom table content posted mathutahedu ftppubtexbib tex form ftpuunet ftppublishedoreillyxresource ascius form x journal bimonthly trade rag lot advertising article informative oriented toward le technical audience read see going expectation learning great deal remember represent fairly small percentage person also pretty good collection person advisory board columnist call 908 5639033 14 widget available three popular widget set athena set provided x11 thi sufficient purpose ugly side recently 3d look available ftp exportlcsmiteducontribxaw3dtarz motif osf available license fee commonly shipped many workstation vendor platform almost everyone sun look good work well personally think poorly implemented olit open look intrinsic toolkit set widget implementing sun open look specification developed att ive never used cant comment quality ive heard rumour pain actually get addition following collection widget also available xtra library widget sale graphical software technology 3103289338 include bar graph stacked bar graph line graph pie chart xy plot hypertext help spreadsheet datum entry form widget ive never seen cant comment fwf free widget foundation attempting collect set freely available widget included pixmap editor filedialog current set widget obtained vium anonymou ftp machine acsuiucedu 1281742521 file pubfwfsharz xcu cornell university widget gene dyke one early widget set released provide nice appearance button ha mini command language probably widely used x sony widget set thi wa around r3 day seemed disappear looked like promise xw hp widget precursor motif originally written r3 exist diff get work r4 r5 pretty good widget set ha le died precursor thi wa xray toolkit wa originally implemented x10r4 apparently provided much experience designer xt xo widget set im working still primitive give try archivecisohiostateedupubxo following specialized widget also available tbl implement tabular layout widget support motif widget child part wcl plot athena plotting widget athena widget contact gnbbbyozau joeathenamitedu 15 alternative intrinsic name language vendor xview c sun ous c parcplace interview c stanford tcltk c spriteberkeleyedu however much like c admire skill designing implementing intrinsic hopefully alternative develop next 35 year use object oriented language keep ymy eye open expect change time language c start gaining acceptance 16 pa float value xtsetvalue first going wrong structure arg essentially typdef struct string name long value arg code arg arg xtsetarg arg name 32 expand arg arg argname name argvalue 32 see normal c type conversion argvalue get integer 3 instead floating point value 32 value copied widget resource bit pattern wildly different required floating point value get around thi following macro athena widget document recomending previou suggestion define xtsetfloatargarg n sizeoffloat sizeofxtargval xtsetargarg n else xtargval ld xtargval xtsetargarg n ld 17 write resource converter courtesy rich thomson rthomsondsdescom following discussion resource converter assume r4 r5 intrinsic resource converter changed r3 r4 allow destructor caching converted value several main type resource converter string datum type datum type string datum type datum type string datum type usually string datum type converter ha fixed set string converted datum type value thi often used map enumerated name enumerated value name value true 1 false 0 thi case string datum type converter need compare resource value list fixed string thi readily accomplished use quark mechanism resource manager resource value turned quark unique representation string fit single word resource quark compared quark fixed string representing enumerated value many enumerated string converter many converter small number enumeration string global initialization routine might used turn resource string quark way first time one converter used string turned quark held static variable use next invocation one converter ius datum type string thi type converter slightly easier string datum type converter since use quark isnt necessary instead datum type value simply converted string value probably use sprintf datum type string converter useful application wish convert internal datum type value string write valid resource specification file thi mechanism used provide snapshot application state file thi snapshot used restore program known state vium usual x resource database mechanism taking trouble write string datum type converter isnt much extra effort write datum type string converter writing time help ensure consistent iius datum type datum type thi type converter used convert existing datum type value another datum type instance x pixel value converted rgb datum type contain separate field red green blue type signature resource converter follow typedef boolean xttypeconverterdisplay xrmvalueptr cardinal xrmvalueptr xrmvalueptr xtpointer display dpy xrmvalueptr arg cardinal numarg xrmvalueptr fromval xrmvalueptr toval xtpointer converterdatum converter invoked fromval argument point source x resource manager value toval argument point destination x resource manager value converterdatum argument opaque pointer converterspecific datum specified converter registered arg numarg argument allow extra information passed converter invoked instance pixel rgb structure converter discussed would need colormap visual argument lookup pixel obtain rgb value corresponding pixel care must taken toval argument xrmvalue ha following type definition specify size location converted value typedef struct unsigned int size caddrt addr xrmvalue xrmvalueptr converter invoked addres may point location given size converted value location null former case converter ensure size destination area large enough handle converted value destination area large enough converter set size amount space needed return false caller ensure enough space allocated reinvoke converter size large enough converter simply copy converted value space given return true location null converter assign location addres static variable containing converted value return true writing group converter thi code often repeated become convenient define macro define donevar type tovaladdr tovalsize sizeoftype tovalsize sizeoftype return false else type tovaladdr var else tovaladdr caddrt var tovalsize sizeoftype return true define donestrstr tovaladdr tovalsize sizeofstring tovalsize sizeofstring return false else tovaladdr caddrt str tovalsize sizeofstring return true inside converter good idea perform little safety checking numarg arg argument ensure ymy converter called properly written ymy converter need register intrinsic intrinsic invoke resource converter creating widget fetching resource value resource database register converter single application context use xtappsettypeconverter void xtappsettypeconvertercontext converter arg numarg cache destructor xtappcontext context string string xttypeconverter converter xtconvertarglist arg cardinal numarg xtcachetype cache xtdestructor destructor register converter application context use xtsettypeconverter void xtsettypeconverterfrom converter arg numarg cache destructor string string xttypeconverter converter xtconvertarglist arg cardinal numarg xtcachetype cache xtdestructor destructor r3 intrinsic routine xtappaddconverter xtaddconverter superseded xtappsettypeconverter xtsettypeconverter whenever possible newer routine used converter registered intrinsic cache argument specify converted resource value cached xtcachenone dont cache converted value xtcacheall cache converted value xtcachebydisplay cache converted value per display basi caching converted value require roundtrip server good idea instance string pixel conversion destructor argument routine invoked resource destroyed either cached reference count ha decremented zero widget owning value destroyed xtdestructor ha following type definition typedef void xtdestructorxtappcontext xrmvalueptr xtpointer xrmvalueptr cardinal xtappcontext context xrmvalueptr xtpointer converterdatum xrmvalueptr arg cardinal numarg destructor invoked free auxiliary storage associated argument actually free storage pointed argument toaddr destructor passed extra argument passed converter conversion wa performed instance colormap visual argument string pixel converter since destructor would need free allocated pixel colormap well private datum passed converter wa registered sample converter code found following file mit r5 distribution mitlibxtconvertersc contriblibpextconvertersc contriblibpextconvertersh 18 open multiple display see multiuser application software using xt x resource issue 3 summer 1992 oliver jone complete coverage issue involved thi answer based article nutshell one use xtopendisplay add display single application context xtclosedisplay shutdown display remove application context real problem occur trying close display thi happen 3 way 1 user select quit button one display 2 user ha window manager send wmdeletewindow message 3 server disconnect possibly killclient message server shutdowncrash network failure ill assume deal gracefully 1 2 since merely problem translating widget display removing display read oliver jone article third one difficult handle following based oliver jone article include difficult problem difficulty arise xlib design presumed io error alway unrecoverable fatal thi essentially true single display x based application true multiple display program application thing display information x server x io error occur io error handler called return exit happen way around thi use setjmplongjmp avoid returning io error handler following code fragment demonstrate thi include setjmph jmpbuf xiorecover void xiohandler dpy display dpy destroydisplay dpy longjmp xiorecover 1 main setjmp xiorecover 0 xsetioerrorhandler xiohandler xtappmainloop appcontext destroydisplay something given display pointer go back application specific datum perform necessary cleanup also call xtclosedisplay unfamiliar setjmplongjmp setjmp first called return 0 save enough information jmpbuf latter execution longjmp return program state setjmp wa executed return value thi second setjmp value second argument longjmp several caveat using thi purpose adequate problem might run resource converter improperly cache resource likely symptom xlib error badcolor badatom badfont may problem total number display open since typically limited number file descriptor available 32 typical value may also run authorization problem trying connect display wa much discussion compwindowsx thi topic november 91 robert scheifler posted article basically said thi way xlib change 19 changed r3 r4 r5 thi address change intrinsic first general change release described certainly incomplete list new function added deprecated listed brevity primary goal much following information retrieved chapter 13 mit xt intrinsic manual oreilly volume 5 3rd edition r3 r4 addition gadget windowles widget new resource type converter interface handle cacheing additional datum variable argument list interface define xtspecificationrelease 4 added thi release wmshellpart toplevelshellpart transientshellpart changed incompatibly coreinitialize coresetvalue added arglist count parameter event handler continuetodispatch parameter added coresetvaluesalmost specification changed corecompressexposure changed enumerated datum type boolean coreclassinited changed enumerated datum type boolean constraintgetvalueshook added extension record coreinitializehook obsolete info passed coreinitialize shellrootgeometrymanager added extension record coresetvalueshook obsolete info passed coresetvalue calling xtquerygeometry must store complete geometry added unrealizecallback xttranslatecoord actually work r4 r4 r5 psuedo resource basetranslation added searching appdefault file made flexible customization resource added perscreen resource database support permanently allocated string permanetly allocated string required several clas field arg argument xtappinitialize xtvaappinitialize xtopendisplay xtdisplayinitialize xtinitialize changed cardinal int many performance improvement thi summarized article xt performance improvement release 5 gabe begeddov x resource issue 3 xrmstringtoquark augmented xrmpermstringtoquark avoid string copy several field clas record indicated needing permanent string using array string resource callback list redesigned use le memory translation manager redesigned rewritten take le memory translation table merge faster cache action binding keycode keysym cached better sharing gc modifiable field window widget translation use le space faster malloc space widget name since quark available widget space allocated include constraint several example program 26 reduction memory usage function new r5 xtallocategc sharable gc modifiable field xtgetactionlist get action table clas xtscreendatabase return resource database screen xtsetlanguageproc register language procedure called set locale function new r4 xtappaddactionhook procedure call every action xtappinitialize lot initialization work xtappreleasecacheref decrement cache reference count converter xtappsetfallbackresource specify default resource xtappsettypeconverter register new style converter xtcallcallbacklist directly execute callback list xtcallconverter invoke new style converter xtcallbackreleasecacheref release cached resource value xtcallbackreleasecachereflist release list cached resource value xtconvertandstore find call resource converter xtdirectconvert invoke oldstyle converter xtdisplayofobject return display xtdisplaystringconversionwarning issue warning conversion xtfindfile find file xtgetactionkeysym retrieve keysym modify thi action xtgetapplicationnameandclas return name clas xtgetconstraintresourcelist get constraint widget xtgetkeysymtable return keycodetokeysym mapping table xtgetmulticlicktime read multiclick time xtgetselectionrequest retrieve selectionrequest event xtgetselectionvalueincremental obtain selection value incrementally xtgetselectionvaluesincremental obtain selection value incrementally xtinitializewidgetclas initialize widget clas manually xtinserteventhanlder register event handler beforeafter xtinsertraweventhandler register event handler without modify input mask xtisobject test subclas object xtisrectobj test subclas rectobj xtkeysymtokeycodelist return list keycode xtlasttimestampprocessed retrieve recent event time xtmenupopdown action popping widget xtmenupopup action popping widget xtoffsetof macro structure offset xtownselectionincremental make selection datum availabe incrementally xtpoupspringloaded map springloaded popup xtregistergrabaction indicate action procedure need passive grab xtremoveactiohhook remove function called every action xtresolvepathname find file xtscreenofobject return screen object xtsetmulticlicktime set multiclick time xtsetwmcolormapwindow set wmcolormapwindow custom colormap xtungrabbutton cancel passive button grab xtungrabkey cancel passive key grab xtungrabkeybard release active keyboard grab xtungrabpointer release active pointer grab xtva varag interface bunch function xtwindowofobject return window nearest widget ancestor deprecated replacement xtaddaction xtappaddaction r3 xtaddconverter xtappaddconverter r3 xtaddinput xtappaddinput r3 xtaddtimeout xtappaddtimeout r3 xtaddworkproc xtappaddworkproc r3 xtconvert xtconvertandstore r4 xtcreateapplicationshell xtappcreateshell r3 xtdestroygc xtreleasegc r3 xterror xtapperror r3 xtgeterrordatabase xtappgeterrordatabase r3 xtgeterrordatabasetext xtappgeterrordatabasetext r3 xtgetselectiontimeout xtappgetselectiontimeout r3 xtinitialize xtappinitialize r3 xtmainloop xtappmainloop r3 menupopdownaction xtmenupopdownaction r4 menupopupaction xtmenupopupaction r4 xtnextevent xtappnextevent r3 xtpeekevent xtapppeekevent r3 xtpending xtapppending r3 xtseterrorhandler xtappseterrorhandler r3 xtseterrormsghandler xtappseterrormsghandler r3 xtsetselectiontimeout xtappsetselectiontimeout r3 xtsetwarninghandler xtappsetwarninghandler r3 xtsetwarningmsghandler xtappsetwarningmsghandler r3 xtwarning xtappwarning r3 xtwarningmsg xtappwarningmsg r3 20 resource loaded resource widget filled following place highest priority lowest priority 1 arg passed creation time 2 command line argument 3 user per host default file 4 user default file 5 user per application default file 6 system wide per application default file note 26 read application startup result step 36 single resource database used query per host default file contain customization application executing specific computer thi file either specified xenvironment environment variable set file homexdefaultshost used user default file either obtained resourcemanager property root window display set file homexdefault used typically program xrdb used set resourcemanager property please note thi kept relatively small client connect display must transfer property size around 13kbyte reasonable toolkit may track change resourcemanager user may many per application default file containing customization specific application intrinsic quite flexible thi file found read next part describe variou environment variable effect thi file found system wide per application default file typically found usrlibx11appdefault file found fallback resource used intrinsic quite flexible thi file found read next part describe variou environment variable effect thi file found thank oliver jone ojpictelcom following 692 use several environment variable control resource loaded ymy xtbased program xfilesearchpath xuserfilesearchpath xapplresdir environment variable control xt look applicationdefault file application initializing xt load one appdefault file path defined xfilesearchpath another path defined xuserfilesearchpath set xfilesearchpath software installed ymy system way appdefault file appear several different directory hierarchy suppose example running sun open window also r4 x application installed usrlibx11appdefault could set value like thi xfilesearchpath would cause xt look appdefault file usrlibx11 usropenwinlib wherever ymy openwinhome located setenv xfilesearchpath usrlibx11tnopenwinhomelibtn value thi environment variable colonseparated list pathname pathname contain replacement character follow see xtresolvepathname n value filename parameter application clas name value file type thi case literal string appdefault c customization resource r5 suffix none appdefault l language locale codeset eg jajpeuc l language part l eg ja territory part display language string c codeset part display language string let take apart example suppose application clas name myterm also suppose open window installed usropenwin notice example omit localespecific lookup usrlibx11tn mean usrlibx11appdefaultsmyterm openwinhomelibtn mean usropenwinlibappdefaultsmyterm application initialize xt try open appdefault file order shown soon find one read use stop looking effect thi path search first usrlibx11 usropenwin let consider another example thi time let set xuserfilesearchpath look file mytermad current working directory myterm directory appdefault setenv xuserfilesearchpath nadhomeappdefaultsn first path list expand mytermad second expand homeappdefaultsmyterm thi convenient setting debugging follow imake convention naming appdefault file mytermad application source directory run application directory working still resource loaded properly note looking appdefault file xuserfilesearchpath bizarre reason neither type file suffix defined useles r5 another twist may specify customization resource value example might run myterm application like thi myterm xrm customization color one ymy pathname specification value usrlibx11appdefaultsnc expanded pathname would usrlibx11appdefaultsmytermcolor c substitution character take value customization resource default xfilesearchpath compiled xt usrlibx11ltnc r5 usrlibx11ltnc r5 usrlibx11tnc r5 usrlibx11ltn usrlibx11ltn usrlibx11tn note site replace usrlibx11 projectroot thi batch default setting default xuserfilesearchpath also compiled xt rootlnc r5 rootlnc r5 rootnc r5 rootln rootln rootn root either value xapplresdir user home directory xapplresdir set set xuserfilesearchpath value default xt ignore xapplresdir altogether notice quick dirty way making ymy application find ymy appdefault file ymy current working directory set xapplresdir single dot r3 thi machinery worked differently r3 compatibilty many person set xapplresdir value dot followed slash 21 order callback executed courtesy donna converse converseexpolcsmitedu 51092 intrinsic library guarantee order thi widget writer application writer ability modify entire content callback list neither one currently know intrinsic guarantee order execution application programmer rely widget writer widget writer required document widget add remove callback list effect thi therefore functionality contained callback independent functionality contained callback list even though xt standard definition xtaddcallback say callbackname specify callback list procedure appended may infer word appended callback routine called order added callback list 22 know widget visible courtesy donna converse converseexpolcsmitedu 51492 building widget need know visible set visible interest field core window completely obscured core visible flag go false however window iconified flag stay set true right everything implemented correctly thi demonstrate deficiency x protocol core widget reflecting capability protocol deficiency information available one way thi case inconvenient way xt specification accurate second third paragraph section 7102 read thi section carefully visible field change response iconification visibilitynotify event received window go viewable unviewable widget ancestor unmapped iconification occur thi protocol deficiency visibility state viewable state specific meaning x protocol see glossary ymy xlib x protocol reference manual thi problem mwm something else need done youll see thi window manager window manager problem mwm fastest way determine window iconified application writer keep track global boolean action routine translation mapnotify unmapnotify shell widget contain ymy custom widget custom widget writer see mapstate field returned call xgetwindowattribute suggestion 23 reparent widget xt ie xtreparentwidget cant 24 use xtmalloc xtfree etc unfortunately code call malloc realloc calloc tend ignore possibility returning null best handled something like ptr type malloc sizeof type ptr perror malloc xyzzy exit 1 handle thi common case intrinsic define function xtmalloc xtcalloc xtnew xtnewstring xtrealloc use standard c language function malloc calloc realloc execute xterrormsg null value returned xt error handler supposed return thi effectively exit addition xtrealloc called null pointer use xtmalloc get initial space thi allows code like ptr ptr type malloc sizeof type else ptr type realloc ptr sizeof type count 1 count written ptr xtrealloc ptr sizeof ptr count also xtfree accept null pointer argument generally ive found xt function conveniant use however anytime im allocating anything potentially large use standard function fully recover enough memory error xtnew xtnewstring conveniant macro allocating structure copying string struct abc xyzzy char ptr char str abcdef xyzzy xtnew struct abc take care type casting ptr xtnewstring str strict interpretation intrinsic reference manual allow implementation provide function exchangable malloc free ie code char ptr ptr xtmalloc 100 free ptr may work personally id call implementation thi broken complain vendor common error motif programmer use xtfree string really using xmstringfree 25 debug xt application first id recomend getting purify pure software thi great package tracing memory problem sun bit pricey 2750 id still recomend excuse marketing blurb contact supportpurecom info purify insert additional checking instruction directly object code produced existing compiler instruction check every memory read write performed program test detect several type acces error reading unitialized memory writing past mallocd bound writing freed memory purify insert checking logic code program including third party vendor objectcode library verify system call interface addition purify track memory usage identify individual memory leak using novel adaption garbage collection technique purify nearly comprehensive memory acces checking slow target program typically factor two five alternative package isnt pricey 395 sun run many unix ha pretty similar feature sentinel debugging environment thi replace malloc several c library function add additional check contact cpcahilvirtechvticom info next getting sort xlib error youll need run synchronou mode easily accomplished sync command line argument setting variable xdebug 1 ymy debugger set break point exit thi let trace back original xlib function called dont run synchronou mode actual error may occured number call xlib previously since xlib call buffered reply server asynchronou next trouble window layout use undocumented resource xtidentifywindow clas resource xtdebug cause widget name identified window example example xload xrm xtdebugtrue example xwininfo tree click new xload window give normal information widget name clas window included thi help checking location size errant widget next trouble geometry manager want test way widget manage child try exportlcsmiteducontriblibxtgeotarz thi act filter child geometry manager check behavimy clever idea unfortunate problem debugging callback application executing grab keyboard mouse pulldown menu server effectively lock youll need go another machine kill debugger manually server lock application debugged ha said one else acces keyboard application stopped waiting debugger waiting ymy command unfortunately cant give input going ymy application stopped best way debug thi kind problem two machine ymy desk running program debugger environment one machine running application possibly using command sequence like thi othermachine xhost thismachine thismachine setenv display othermachine0 thismachine gdb application ymy favorite debugger thi othermachine xhost thismachine thismachine gdb application gdb set environment display othermachine0 gdb run believe codecenter c interpretergraphical debugger ha method dealing thi explicitely calling xlib function release grab breakpoint debugging widget problem require pretty good debugging skill knowledge widget work go long way without knowing internal particular widget far without understanding widget work judiciou use conditional breakpoint adding print statement debugger help great deal 26 dont xtaddinput xtaddtimeout xtaddworkproc work got delicate problem three routine xtaddinput xtaddtimeout xtaddworkproc problem use application seem registred properly made handy little testprogram everything work perfect real application nothing happen introduction r3 xtapp function obsoleted routine see q19 change r3 r4 r5 happen use default application context different one may created since event timeout distributed per application context basi using two application context wont get event example cnt 0 toplevel xtappinitializeapp clas desc xtnumber desc argc argv fallback arg cnt xtaddtimeout xtaddworkproc xtappmainloop app would never invoke timeout 27 implement drag drop courtesy roger reynold rogerrnetcomcom 19 feb 93 dragndrop buzzword moving datum client intuitive fashion motif version 12 support dragndrop capability openlook ha supported dnd along two protocol compatable far know published wrote package called rdd designed flexible public protocol drag n drop operation client intention wa provide tool would make easy person support standard dragndrop protocol program develop contribute sell regardles widget set used long based xt implementation based upon understanding icccm convention detail read code heard dozen person using rdd like feel work whole lot better motif 12 stuff also seem many think neat constrained use motif anyway latest rdd stuff available ftp netcomcom pubrogerr possibly older version also available exportlcsmitedu contrib pete ware warecisohiostateedu ci dept ohio state university w 614 2927318 228 bolz hall 2036 neil ave h 614 5380965 columbu oh 43210